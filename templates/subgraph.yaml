specVersion: 0.0.2
description: conquest.eth
schema:
  file: ./schema.graphql
dataSources:
  - kind: ethereum/contract
    name: OuterSpace
    network: {{chainName}}
    source:
      address: '{{contracts.OuterSpace.address}}'
      abi: OuterSpaceContract
      startBlock: {{contracts.OuterSpace.receipt.blockNumber}}
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.3
      language: wasm/assemblyscript
      entities:
        - Space
        - Planet
        - Owner
        - Fleet
        - PlanetStakeEvent
        - PlanetExitEvent
        - FleetArrivedEvent
        - FleetSentEvent
        - StakeToWithdrawEvent
        - Chain
      abis:
        - name: OuterSpaceContract
          file: ./abis/OuterSpace.json
      eventHandlers:
        - event: PlanetStake(indexed address,indexed uint256,uint32,uint256)
          handler: handlePlanetStake
        - event: FleetSent(indexed address,indexed address,indexed uint256,address,uint256,uint32,uint32)
          handler: handleFleetSent
        - event: FleetArrived(indexed uint256,indexed address,indexed address,uint256,bool,uint32,uint32,uint32,uint32,bool,uint32)
          handler: handleFleetArrived
        - event: PlanetReset(indexed uint256)
          handler: handlePlanetReset
        - event: PlanetExit(indexed address,indexed uint256)
          handler: handleExit
        - event: StakeToWithdraw(indexed address,uint256)
          handler: handleStakeToWithdraw
        - event: ExitComplete(indexed address,indexed uint256,uint256)
          handler: handleExitComplete
        - event: RewardSetup(indexed uint256,indexed address,uint256)
          handler: handleRewardSetup
        - event: RewardToWithdraw(indexed address,indexed uint256,indexed uint256)
          handler: handleRewardToWithdraw
        - event: Initialized(uint32,uint32,uint32,uint32,bytes32)
          handler: handleInitialized
      file: ./src/outerspace.ts
  - kind: ethereum/contract
    name: ConquestToken
    network: {{chainName}}
    source:
      address: '{{contracts.ConquestToken.address}}'
      abi: ConquestToken_Contract
      startBlock: {{contracts.ConquestToken.receipt.blockNumber}}
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.3
      language: wasm/assemblyscript
      entities:
        - Owner
        - Chain
      abis:
        - name: ConquestToken_Contract
          file: ./abis/ConquestToken.json
      eventHandlers:
        - event: Transfer(indexed address,indexed address,uint256)
          handler: handleTokenTransfer
      file: ./src/token.ts
  - kind: ethereum/contract
    name: AllianceRegistry
    network: {{chainName}}
    source:
      address: '{{contracts.AllianceRegistry.address}}'
      abi: AllianceRegistry_Contract
      startBlock: {{contracts.AllianceRegistry.receipt.blockNumber}}
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.3
      language: wasm/assemblyscript
      entities:
        - Owner
        - Alliance
      abis:
        - name: AllianceRegistry_Contract
          file: ./abis/AllianceRegistry.json
      eventHandlers:
        - event: AllianceLink(indexed address,indexed address,bool)
          handler: handleAllianceLink
      file: ./src/alliances.ts
